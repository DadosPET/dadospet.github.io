<!DOCTYPE HTML>
<html>
	<head>
		<title>CinQuest - Design dos Sistemas</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo"><strong>CinQuest</strong>, design dos sistemas, inventário</a>
									<ul class="icons">
										<li><a href="https://github.com/pet-informatica/CinQuest" class="icon fa-github"><span class="label">GitHub</span></a></li>
										<li><a href="https://pet-informatica.github.io/cinquest" class="icon fa-home"><span class="label">Home</span></a></li>
									</ul>
								</header>

							<!-- Banner -->
								<section>
										<header>
											<h1>Sistema de Itens <i class="icon fa-book"></i></h1>
										</header>
										<p>
											Este documento detalha o sistema de itens, e como os itens são exibidos no inventário do jogador. Ele é composto por:
										</p>
										<ul>
											<li><a href="#genericitem">Itens Genéricos</a></li>
											<li><a href="#userinventory">Inventário</a></li>
											<li><a href="#item">Item.cs</a></li>
											<li><a href="#slot">Slot.cs</a></li>
											<li><a href="#inventoryui">UI</a></li>
										</ul>

										<h2 id="genericitem">Itens Genéricos</h2>
										<p>A forma mais básica de um item, onde só é armazenado seu identificador. Essa classe será usada para armazenar itens que não necessitam serem exibidos na <a href="#inventoryui">UI</a>, como as <a href="quest.html#precondition">PreConditions</a>.</p>
										<pre><code>
public class GenericItem : ScriptableObject
{
   public int identifier;
   ...
}
										</code></pre>

										<h2 id="userinventory">Inventário do Jogador</h2>
										<p>O inventário do jogador é composto simplesmente por uma <code>List<GenericItem>()</code>, presente na classe <a href="user.html">User.cs</a> que armazena todas as <a href="quest.html#precondition">PreConditions</a> e <a href="#item">Items</a> que ele possue.

										<h2 id="item">Item.cs</h2>
										<p>Representa um item que poderá ser exibido na <a href="inventoryui">UI</a> do inventário.</p>
										<pre><code>
public class Item : GenericItem {

    public Sprite sprite;
    public string title;
    public string description;

    ...
}
										<p>Suas informações de <code>sprite</code>, <code>title</code> e <code>description</code> são utilizadas quando o item está inserido em um <a href="#slot">Slot</a>.
										</code></pre>

										<h2 id="slot">Slot.cs</h2>
										<p>
											Classe responsável pelas representações dos slots do inventário. Pode ficar vazio ou com um <a href="#item">item</a>. Recebe o item que ficará armazenado nele e o sprite do slot vazio. Quando o jogador passa o mouse por cima no slot do item, informações como nome e descrição serão buscadas.
										</p>
										<pre><code>
public class Slot : MonoBehaviour, IPointerEnterHandler {

    public Sprite empty;
    public Item Item {    get; private set;    }
    public Text itemName;
    public Text itemDescription;

    ...

    public void OnPointerEnter(PointerEventData data){
        if (Item != null) {
            itemName.text = Item.title;
            itemDescription.text = Item.description;
       }
    }
}
										</code></pre>

										<h2 id="inventoryui">InventoryUI.cs</h2>
										<p>
											Classe responsável pelo gerenciamento da parte gráfica do Inventário. É composto pelo por um array de <a href="#slot">slots</a> e o estado da janela do inventário. Tem métodos que controla a abertura e fechamento da janela.
										</p>
										<pre><code>
public class InventoryUI : MonoBehaviour {

    public GameObject inventory;
    public Slot[] slots;
    bool opened;
    MenuStatus menuStatus;

    ...

    void UpdateContent(){
        foreach (Slot slot in slots)
            slot.SetItem (null);

            for(int i = 0, j = 0; j < User.Instance.Items.Count; ++j) {
            if (User.Instance.Items [j] is Item) {
                slots [i++].SetItem(((Item)User.Instance.Items [j]));
            }
        }
    }

    public void OpenWindow()
    {
        inventory.SetActive(true);
        UpdateContent ();
        opened = true;
        menuStatus.open ("Inventory");
    }

    public void CloseWindow()
    {
        opened = false;
        menuStatus.close ("Inventory");
        inventory.SetActive (false);
    }

    ...
}
										</code></pre>
										<p>A cada vez que janela é aberta, os itens do jogador são atualizados de acordo com o seu <a href="#userinventory">Inventário</a></p>
								</section>
						</div>
					</div>

				<!-- SideBar -->
					<div id="sidebar">
						<div class="inner">


							<!-- System Design section -->
								<nav id="menu">

									<header class="major">
										<h2>Design dos Sistemas</h2>
									</header>
									<ul>
										<li>
											<span class="opener">Quest</span>
											<ul>
												<li><a href="quest.html#preconditions">PreConditions</a></li>
												<li><a href="quest.html#rewards">Rewards</a></li>
												<li><a href="quest.html#questcs">Quest.cs</a></li>
												<li><a href="quest.html#xmlcollections">Coleções XML</a></li>
												<li><a href="quest.html#managers">Gerenciadores</a></li>
												<li><a href="quest.html#ui">UI</a></li>
											</ul>
										</li>
										<li>
											<span class="opener">Diálogo</span>
											<ul>
												<li><a href="dialog.html#tree">DialogTree.cs</a></li>
												<li><a href="dialog.html#nodes">DialogTreeNode.cs</a></li>
												<li><a href="dialog.html#questnodes">Quest Nodes</a></li>
												<li><a href="dialog.html#manager">DialogManager.cs</a></li>
												<li><a href="dialog.html#speaker">Speaker.cs</a></li>
												<li><a href="dialog.html#interativespeaker">Extensões do Speaker</a></li>
											</ul>
										</li>
										<li>
											<span class="opener">Inventário</span>
											<ul>
												<li><a href="#genericitem">Itens Genéricos</a></li>
												<li><a href="#userinventory">Inventário</a></li>
												<li><a href="#item">Item.cs</a></li>
												<li><a href="#slot">Slot.cs</a></li>
												<li><a href="#inventoryui">UI</a></li>
											</ul>
										</li>
										<li><a href="#">Music Player</a></li>
									</ul>

									<br/>
									<header class="major">
										<h2>Tutoriais</h2>
									</header>
									<ul>
										<li>
											<span class="opener">Quest</span>
											<ul>
												<li><a href="#">PreConditions</a></li>
												<li><a href="#">Rewards</a></li>
												<li><a href="#">Quest.cs</a></li>
												<li><a href="#">Coleções XML</a></li>
												<li><a href="#">Gerenciadores</a></li>
												<li><a href="#">UI</a></li>
											</ul>
										</li>
										<li>
											<span class="opener">Diálogo</span>
											<ul>
												<li><a href="#">Dialog Tree</a></li>
												<li><a href="#">Dialog Tree Node</a></li>
												<li><a href="#">Quest Nodes</a></li>
												<li><a href="#">Speaker</a></li>
												<li><a href="#">Interative Speaker</a></li>
												<li><a href="#">Auto Speaker</a></li>
											</ul>
										</li>
										<li>
											<span class="opener">Inventário</span>
											<ul>
												<li><a href="#">Lorem Dolor</a></li>
												<li><a href="#">Ipsum Adipiscing</a></li>
												<li><a href="#">Tempus Magna</a></li>
												<li><a href="#">Feugiat Veroeros</a></li>
											</ul>
										</li>
									</ul>
								</nav>
							<!-- Section -->
								<section>
									<header class="major">
										<h2>Contate-nos</h2>
									</header>
									<p>O CinQuest foi desenvolvido pelo PET-Informática. Qualquer dúvida, pode falar com a gente!</p>
									<ul class="contact">
										<li class="fa-envelope-o">pet-informatica@cin.ufpe.br</li>
										<li class="fa-home"><a href="https://pet-informatica.github.io">Website</a></li>
										<li class="fa-facebook"><a href="https://www.facebook.com/petinformatica/">Facebook</a></li>
									</ul>
								</section>
						</div>
					</div>
			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
